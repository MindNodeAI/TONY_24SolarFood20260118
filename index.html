<!DOCTYPE html>
<html lang="zh-TW" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>24食令節氣智慧 (V6.9.1 Final Fix) | Tony Studio</title>
    <meta name="theme-color" content="#020617">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: { 850: '#1e293b', 900: '#0f172a', 950: '#020617' },
                        amber: { 450: '#fbbf24' }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/dexie@3.2.4/dist/dexie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #020617; color: #f8fafc; }
        h1, h2, h3, h4, .serif { font-family: 'Noto Serif TC', serif; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #fbbf24; }
        
        .loader { border: 3px solid #1e293b; border-radius: 50%; border-top: 3px solid #fbbf24; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        
        .markdown-body { color: #cbd5e1; line-height: 1.8; font-family: 'Noto Sans TC', sans-serif; font-size: 15px; }
        .markdown-body h2 { font-family: 'Noto Serif TC', serif; font-size: 1.4em; color: #fbbf24; margin-top: 1.5em; margin-bottom: 0.8em; font-weight: 700; border-bottom: 1px solid #334155; padding-bottom: 0.3em; }
        .markdown-body strong { color: #020617; font-weight: 700; background: #fbbf24; padding: 0 4px; border-radius: 2px; }
        .markdown-body blockquote { border-left: 4px solid #fbbf24; background-color: #1e293b; padding: 1rem 1.5rem; margin: 1.5rem 0; border-radius: 0 8px 8px 0; color: #94a3b8; font-style: italic; }
        
        .high-contrast-input { background-color: #ffffff !important; color: #000000 !important; border: 2px solid #fbbf24 !important; font-family: monospace; font-weight: bold; }
        .gold-card { background: #0f172a; border: 1px solid #334155; transition: all 0.3s ease; }
        .gold-card:hover { border-color: #fbbf24; transform: translateY(-3px); box-shadow: 0 10px 20px -5px rgba(251, 191, 36, 0.15); }
        .reason-tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: rgba(16, 185, 129, 0.2); color: #34d399; border: 1px solid rgba(16, 185, 129, 0.4); margin-top: 4px; display: inline-block; }
        .terroir-btn { @apply text-left px-3 py-2 rounded-lg border border-slate-700 hover:border-amber-500 hover:bg-slate-800 transition text-xs flex justify-between items-center; }
        .terroir-btn span:last-child { @apply text-slate-500 text-[10px]; }
        .terroir-btn:hover span:last-child { @apply text-amber-400; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden bg-slate-950 text-slate-100">

    <header class="bg-slate-900 border-b border-slate-800 shadow-xl z-50 flex-none h-auto py-4">
        <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3 w-full md:w-auto justify-between">
                <div class="flex items-center gap-3 cursor-pointer group" onclick="app.navigate('home')">
                    <div class="p-1.5 rounded-lg border border-amber-500/30 group-hover:border-amber-400 transition bg-slate-800">
                        <img src="https://i.postimg.cc/fT2sQW09/1.png" alt="Logo" class="h-9 w-9 object-contain brightness-125"> 
                    </div>
                    <div>
                        <h1 class="font-bold text-xl leading-none tracking-widest text-amber-400 font-serif">24食令節氣智慧</h1>
                        <p class="text-[9px] text-slate-400 tracking-[0.3em] mt-1 uppercase">V6.9.1 完美修復版</p>
                    </div>
                </div>
                <button class="md:hidden text-2xl text-amber-400" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"><i class="fas fa-bars"></i></button>
            </div>
            <div class="w-full md:max-w-md">
                <div class="flex items-center gap-2 bg-slate-950 p-1.5 rounded-lg border border-slate-700 shadow-inner">
                    <div class="pl-2 text-amber-500 font-bold whitespace-nowrap text-xs flex items-center gap-1"><i class="fas fa-key"></i> KEY</div>
                    <input type="password" id="static-api-key" class="high-contrast-input w-full rounded px-3 py-1.5 text-sm focus:outline-none" placeholder="輸入 Gemini API Key..." onchange="app.saveKey(this.value)">
                    <div id="key-status" class="w-2.5 h-2.5 rounded-full bg-slate-700 mx-2 border border-slate-600" title="未啟動"></div>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden bg-slate-900 border-t border-slate-800 text-slate-300 text-sm mt-3 shadow-2xl">
            <button onclick="app.navigate('home')" class="block w-full text-left p-4 border-b border-slate-800 hover:text-amber-400 hover:bg-slate-800"><i class="fas fa-home mr-3 text-amber-500/50"></i>首頁</button>
            <button onclick="app.navigate('curation')" class="block w-full text-left p-4 border-b border-slate-800 hover:text-amber-400 hover:bg-slate-800"><i class="fas fa-magic mr-3 text-amber-500/50"></i>大師智慧食令</button>
            <button onclick="app.navigate('solar-terms')" class="block w-full text-left p-4 border-b border-slate-800 hover:text-amber-400 hover:bg-slate-800"><i class="fas fa-sun mr-3 text-amber-500/50"></i>24 節氣</button>
            <button onclick="app.navigate('ingredients')" class="block w-full text-left p-4 border-b border-slate-800 hover:text-amber-400 hover:bg-slate-800"><i class="fas fa-leaf mr-3 text-amber-500/50"></i>食材百科</button>
            <button onclick="app.hardReset()" class="block w-full text-left p-4 text-red-400 hover:bg-slate-800"><i class="fas fa-trash mr-3"></i>重置系統</button>
        </div>
    </header>

    <main id="main-view" class="flex-1 overflow-y-auto relative scroll-smooth w-full p-4 md:p-6 bg-slate-950 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] bg-fixed">
        <div id="system-loader" class="flex flex-col items-center justify-center h-full text-slate-500">
            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-500 mb-6"></div>
            <p class="text-xs font-bold tracking-[0.2em] text-amber-500/80" id="loader-text">SYSTEM INITIALIZING...</p>
            <div class="w-48 h-1 bg-slate-800 rounded-full mt-6 overflow-hidden"><div id="progress-bar" class="h-full bg-amber-500 w-0 transition-all duration-300 shadow-[0_0_10px_#fbbf24]"></div></div>
        </div>
        <div id="content-area" class="hidden fade-in max-w-6xl mx-auto space-y-10 pb-10"></div>
    </main>

    <footer class="bg-slate-900 border-t border-slate-800 py-8 text-center text-[10px] text-slate-500 flex-none font-sans relative z-10">
        <p class="mb-1 tracking-widest">© 2026 TONY STUDIO. 24食令節氣智慧.</p>
        <p class="opacity-50">AI-Powered Seasonal Curation Engine</p>
    </footer>

    <script>
        const DB_NAME = 'seasonal-food-v6-9-1-final'; 
        const db = new Dexie(DB_NAME);
        
        db.version(1).stores({
            ingredients: '++id, name_zh, categoryId, origin, *tags, *solarTermIds',
            solarTerms: '++id, name_zh',
            generatedAssets: '++id, type, createdAt'
        });

        // --- 1. Solar Engine ---
        const SolarEngine = {
            getCurrent: async () => await db.solarTerms.get('st_23'), 
            getAll: async () => await db.solarTerms.toArray(),
            getById: async (id) => await db.solarTerms.get(id)
        };

        // --- 2. Ingredient Engine ---
        const IngredientEngine = {
            getById: async (id) => {
                if(!id) return null;
                if(!isNaN(id)) return await db.ingredients.get(Number(id));
                return await db.ingredients.get(id);
            },
            getAll: async () => await db.ingredients.toArray()
        };

        // --- 3. Smart Curator Engine ---
        const SmartEngine = {
            filterByHealth: async (conditionCode) => {
                const all = await db.ingredients.toArray();
                let recommended = [];
                all.forEach(ing => {
                    const tags = ing.tags || [];
                    if (conditionCode === 'dm') { if (tags.includes('low_gi') || tags.includes('high_fiber')) recommended.push(ing); }
                    else if (conditionCode === 'ckd') { if (tags.includes('low_potassium')) recommended.push(ing); }
                    else if (conditionCode === 'gout') { if (tags.includes('low_purine') || tags.includes('alkaline')) recommended.push(ing); }
                    else if (conditionCode === 'htn') { if (tags.includes('high_potassium') || tags.includes('low_bp')) recommended.push(ing); }
                    else if (conditionCode === 'ulcer') { if (tags.includes('ulcer_friendly') || tags.includes('mucilage')) recommended.push(ing); }
                });
                return { recommended };
            },
            filterByNutrition: async (tag) => {
                const all = await db.ingredients.toArray();
                const tagMap = {
                    'high_iron': ['high_iron', 'blood_tonic'],
                    'eye_care': ['eye_care', 'high_vit_a', 'lutein'],
                    'calming': ['calming', 'magnesium'],
                    'high_vit_c': ['high_vit_c', 'whitening'],
                    'high_calcium': ['high_calcium', 'calcium']
                };
                const searchTags = tagMap[tag] || [tag];
                return all.filter(ing => ing.tags.some(t => searchTags.includes(t)));
            },
            filterByOrigin: async (region) => {
                const all = await db.ingredients.toArray();
                return all.filter(ing => ing.origin && ing.origin.includes(region));
            }
        };

        // --- 4. Content Engine ---
        const ContentEngine = {
            callGemini: async (prompt) => {
                if (!app.state.apiKey) return { text: "請先在上方輸入 API Key 以啟動大師模式。", isAI: false };
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${app.state.apiKey}`, {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });
                    const data = await response.json();
                    return { text: data.candidates?.[0]?.content?.parts?.[0]?.text || "AI 無回應", isAI: true };
                } catch (e) { return { text: `連線錯誤: ${e.message}`, isAI: false }; }
            },
            saveAsset: async (type, content, parentId) => {
                await db.generatedAssets.add({ type, content, createdAt: new Date().toISOString(), parentId });
            },
            exportWord: (title, content) => {
                // Advanced HTML Template for Word
                const html = `
                    <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                    <head>
                        <meta charset='utf-8'>
                        <title>${title}</title>
                        <!--[if gte mso 9]>
                        <xml>
                        <w:WordDocument>
                            <w:View>Print</w:View>
                            <w:Zoom>100</w:Zoom>
                            <w:DoNotOptimizeForBrowser/>
                        </w:WordDocument>
                        </xml>
                        <![endif]-->
                        <style>
                            body { font-family: 'Microsoft JhengHei', 'PMingLiU', sans-serif; font-size: 12pt; line-height: 1.5; color: #000000; }
                            h1 { font-size: 20pt; font-weight: bold; color: #B45309; text-align: center; margin-bottom: 24pt; border-bottom: 2px solid #D97706; padding-bottom: 10pt; }
                            h2 { font-size: 16pt; font-weight: bold; color: #92400E; margin-top: 18pt; margin-bottom: 12pt; border-left: 5px solid #F59E0B; padding-left: 10pt; background-color: #FFFBEB; }
                            h3 { font-size: 14pt; font-weight: bold; color: #333333; margin-top: 12pt; margin-bottom: 6pt; }
                            p { margin-bottom: 12pt; text-align: justify; text-justify: inter-ideograph; }
                            ul { margin-bottom: 12pt; }
                            li { margin-bottom: 4pt; }
                            strong { color: #B45309; font-weight: bold; }
                            blockquote { margin: 12pt 24pt; padding: 10pt; background-color: #F3F4F6; border-left: 4px solid #9CA3AF; color: #4B5563; font-style: italic; }
                            .footer { margin-top: 50pt; text-align: center; font-size: 10pt; color: #9CA3AF; border-top: 1px solid #E5E7EB; padding-top: 10pt; }
                        </style>
                    </head>
                    <body>
                        <h1>${title}</h1>
                        ${marked.parse(content)}
                        <div class="footer">
                            <p>— 本文件由「TONY導師 與 AI 協作生成」 —</p>
                        </div>
                    </body>
                    </html>`;
                
                const blob = new Blob(['\ufeff', html], { type: 'application/msword' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `${title}_智慧策展.doc`;
                link.click();
            }
        };

        const app = {
            state: { apiKey: localStorage.getItem('tony_ai_api_key') || '', isReady: false },

            init: async () => {
                try {
                    if(app.state.apiKey) {
                        document.getElementById('static-api-key').value = app.state.apiKey;
                        document.getElementById('key-status').className = "w-2.5 h-2.5 rounded-full bg-emerald-500 mx-2 shadow-[0_0_8px_#10b981]";
                    }
                    
                    const ingCount = await db.ingredients.count();
                    const solarCount = await db.solarTerms.count();
                    
                    if (ingCount < 120 || solarCount < 24) { 
                        await app.seedData(); 
                    } else { 
                        app.completeBoot(); 
                    }
                } catch (e) {
                    console.error("Boot Error", e);
                    if(confirm("系統異常，是否重置？")) app.hardReset();
                }
            },

            // FIXED: Directly call correct function name
            exportWord: (title, content) => ContentEngine.exportWord(title, content),
            
            callAI: (prompt) => ContentEngine.callGemini(prompt),

            seedData: async () => {
                const loader = document.getElementById('loader-text');
                const bar = document.getElementById('progress-bar');
                
                loader.innerText = "UPDATING SOLAR DATA...";
                await db.solarTerms.clear();
                await db.solarTerms.bulkPut(RawData.solarTerms);
                bar.style.width = "20%";

                loader.innerText = "UPDATING MASTER DB (126+)...";
                await db.ingredients.clear();
                const chunkSize = 30;
                for (let i = 0; i < RawData.ingredients.length; i += chunkSize) {
                    const chunk = RawData.ingredients.slice(i, i + chunkSize);
                    await db.ingredients.bulkPut(chunk);
                    const pct = 20 + Math.floor(((i + chunkSize) / RawData.ingredients.length) * 80);
                    bar.style.width = `${pct}%`;
                    await new Promise(r => setTimeout(r, 10)); 
                }
                app.completeBoot();
            },

            completeBoot: () => {
                app.state.isReady = true;
                document.getElementById('system-loader').classList.add('hidden');
                document.getElementById('content-area').classList.remove('hidden');
                app.router(); 
            },

            navigate: (route) => {
                window.location.hash = route;
                app.router();
                document.getElementById('mobile-menu').classList.add('hidden');
            },

            router: async () => {
                if (!app.state.isReady) return;
                const hash = window.location.hash.slice(1) || 'home';
                const [view, id] = hash.split('/');
                const container = document.getElementById('content-area');
                window.scrollTo(0,0);
                if (view === 'home') container.innerHTML = await Views.home();
                else if (view === 'curation') container.innerHTML = await Views.curation();
                else if (view === 'ingredients') container.innerHTML = id ? await Views.ingredientDetail(id) : await Views.ingredientList();
                else if (view === 'solar-terms') container.innerHTML = id ? await Views.solarDetail(id) : await Views.solarList();
                else container.innerHTML = await Views.home();
            },

            saveKey: (val) => {
                localStorage.setItem('tony_ai_api_key', val.trim());
                app.state.apiKey = val.trim();
                document.getElementById('key-status').className = "w-2.5 h-2.5 rounded-full bg-emerald-500 mx-2 shadow-[0_0_8px_#10b981]";
                alert("AI 大腦已連線！");
            },

            hardReset: async () => {
                await Dexie.delete(DB_NAME);
                localStorage.clear();
                window.location.reload();
            },

            saveAsset: async (type, content, parentId) => {
                await db.generatedAssets.add({ type, content, createdAt: new Date().toISOString(), parentId });
            }
        };

        const Views = {
            home: async () => {
                const count = await db.ingredients.count();
                return `
                    <div class="text-center py-16 space-y-8 fade-in">
                        <div class="inline-block p-4 rounded-full bg-slate-900 border border-amber-500/30 shadow-[0_0_30px_rgba(251,191,36,0.1)] mb-4">
                            <i class="fas fa-seedling text-4xl text-amber-400"></i>
                        </div>
                        <h2 class="text-5xl font-serif font-bold text-slate-100 tracking-wider">24食令節氣智慧</h2>
                        <p class="text-slate-400 max-w-lg mx-auto text-lg font-light leading-relaxed">
                            已鎖定資料庫：<span class="text-amber-400 font-bold">${count}</span> 種大地食材 (蔬果花藥) 與 24 節氣智慧。<br>
                            結合 AI 邏輯推理，為您量身打造大師級飲食方案。
                        </p>
                        <div class="flex justify-center pt-8">
                            <button onclick="app.navigate('curation')" class="bg-gradient-to-r from-amber-500 to-amber-600 text-slate-900 px-10 py-4 rounded-full shadow-[0_0_20px_rgba(245,158,11,0.4)] hover:shadow-[0_0_30px_rgba(245,158,11,0.6)] transition font-bold text-lg flex items-center gap-3 transform hover:-translate-y-1">
                                <i class="fas fa-compass"></i> 進入大師智慧食令
                            </button>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8 px-4">
                        <div onclick="app.navigate('ingredients')" class="gold-card bg-slate-900 p-8 rounded-2xl cursor-pointer group relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-32 h-32 bg-amber-500/10 rounded-full blur-3xl -mr-16 -mt-16 group-hover:bg-amber-500/20 transition"></div>
                            <div class="flex items-center gap-6 relative z-10">
                                <div class="text-5xl text-emerald-400"><i class="fas fa-book-open"></i></div>
                                <div>
                                    <h4 class="font-bold text-slate-100 text-2xl font-serif">食材百科全書</h4>
                                    <p class="text-sm text-slate-400 mt-2">完整收錄蔬果、花卉、藥膳、香料、菌菇</p>
                                </div>
                            </div>
                        </div>
                        <div onclick="app.navigate('solar-terms')" class="gold-card bg-slate-900 p-8 rounded-2xl cursor-pointer group relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-16 -mt-16 group-hover:bg-blue-500/20 transition"></div>
                            <div class="flex items-center gap-6 relative z-10">
                                <div class="text-5xl text-amber-400"><i class="fas fa-clock"></i></div>
                                <div>
                                    <h4 class="font-bold text-slate-100 text-2xl font-serif">二十四節氣智慧</h4>
                                    <p class="text-sm text-slate-400 mt-2">完整收錄春生、夏長、秋收、冬藏的養生之道</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },

            curation: async () => `
                <div class="max-w-6xl mx-auto fade-in">
                    <div class="flex justify-between items-center mb-10 border-b border-slate-800 pb-6">
                        <div>
                            <h2 class="text-3xl font-serif font-bold text-amber-400"><i class="fas fa-magic mr-3"></i>大師智慧食令</h2>
                            <p class="text-sm text-slate-400 mt-2">人、事、時、地、物五大維度邏輯運算，AI 為您規劃最佳方案。</p>
                        </div>
                        <button onclick="app.navigate('home')" class="text-slate-500 hover:text-slate-300 transition"><i class="fas fa-times text-xl"></i></button>
                    </div>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                        <div class="gold-card p-6 rounded-2xl cursor-pointer group" onclick="Views.showCurationOptions('origin')"><div class="text-amber-400 text-3xl mb-4"><i class="fas fa-map-marked-alt"></i></div><h3 class="font-bold text-slate-100 text-xl font-serif mb-2">地・產地風土</h3><p class="text-xs text-slate-400">寶島物產地圖 (一鄉一蔬果)</p><div class="mt-4 text-xs font-bold text-amber-500">點擊探索 ></div></div>
                        <div class="gold-card p-6 rounded-2xl cursor-pointer group" onclick="Views.showCurationOptions('health')"><div class="text-emerald-400 text-3xl mb-4"><i class="fas fa-heartbeat"></i></div><h3 class="font-bold text-slate-100 text-xl font-serif mb-2">人・對症食療</h3><p class="text-xs text-slate-400">糖尿病、高血壓、腎臟病、痛風...</p><div class="mt-4 text-xs font-bold text-emerald-500">點擊設定 ></div></div>
                        <div class="gold-card p-6 rounded-2xl cursor-pointer group" onclick="Views.showCurationOptions('nutrition')"><div class="text-blue-400 text-3xl mb-4"><i class="fas fa-dumbbell"></i></div><h3 class="font-bold text-slate-100 text-xl font-serif mb-2">物・機能保養</h3><p class="text-xs text-slate-400">補鐵、護眼、助眠、抗氧化...</p><div class="mt-4 text-xs font-bold text-blue-500">點擊設定 ></div></div>
                        <div class="gold-card p-6 rounded-2xl cursor-pointer group" onclick="Views.showCurationOptions('type')"><div class="text-pink-400 text-3xl mb-4"><i class="fas fa-spa"></i></div><h3 class="font-bold text-slate-100 text-xl font-serif mb-2">特・主題精選</h3><p class="text-xs text-slate-400">藥膳、花卉、菌菇、香料...</p><div class="mt-4 text-xs font-bold text-pink-500">點擊設定 ></div></div>
                    </div>
                    <div id="curation-options-panel" class="hidden bg-slate-900 p-8 rounded-2xl border border-slate-700 mb-10 shadow-2xl relative"></div>
                    <div id="curation-results" class="hidden">
                        <div id="curator-note" class="bg-slate-900 border-l-4 border-amber-500 p-6 mb-8 rounded-r-xl shadow-lg flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                            <div><h4 class="font-bold text-amber-400 text-lg mb-2 font-serif"><i class="fas fa-quote-left mr-2"></i>大師策展筆記</h4><p id="note-content" class="text-sm text-slate-300 leading-relaxed max-w-3xl"></p></div>
                            <button onclick="Views.triggerCuratorAI()" class="bg-amber-500 hover:bg-amber-600 text-slate-900 px-6 py-3 rounded-lg text-sm font-bold shadow-lg transition flex items-center gap-2 whitespace-nowrap self-start md:self-center"><i class="fas fa-magic"></i> 生成完整方案</button>
                        </div>
                        <div id="discovery-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8"></div>
                        <div id="ai-curation-result" class="hidden mt-8 bg-slate-900 p-10 rounded-2xl shadow-2xl border border-slate-700"><h3 class="text-2xl font-serif font-bold mb-6 text-amber-400 border-b border-slate-700 pb-3">大師策展報告</h3><div id="ai-curation-text" class="markdown-body"></div><div class="mt-8 text-right border-t border-slate-800 pt-4"><button onclick="app.exportWord('大師智慧食令方案', document.getElementById('ai-curation-text').innerText)" class="text-xs font-bold text-slate-900 bg-slate-200 hover:bg-white px-4 py-2 rounded transition"><i class="fas fa-download mr-1"></i> 下載 Word</button></div></div>
                    </div>
                </div>
            `,

            showCurationOptions: (type) => {
                const panel = document.getElementById('curation-options-panel');
                panel.classList.remove('hidden');
                document.getElementById('curation-results').classList.add('hidden');
                let html = '';
                const btnClass = "terroir-btn"; 
                
                if(type === 'origin') {
                    html = `
                        <h4 class="font-bold text-amber-400 mb-6 text-lg border-b border-slate-700 pb-2"><i class="fas fa-map-marked-alt mr-3"></i>探索寶島風土 (一鄉一蔬果)：</h4>
                        <div class="grid md:grid-cols-5 gap-6">
                            <div><h5 class="text-emerald-500 font-bold mb-3 border-l-2 border-emerald-500 pl-2">北部</h5><div class="flex flex-col gap-2"><button onclick="Views.runCuration('origin', '宜蘭', '宜蘭')" class="${btnClass}"><span>宜蘭</span><span>三星蔥/金棗</span></button><button onclick="Views.runCuration('origin', '桃園', '桃園')" class="${btnClass}"><span>桃園</span><span>韭菜/空心菜</span></button><button onclick="Views.runCuration('origin', '新竹', '新竹')" class="${btnClass}"><span>新竹</span><span>柿子/米粉</span></button><button onclick="Views.runCuration('origin', '基隆', '基隆')" class="${btnClass}"><span>基隆</span><span>山藥</span></button><button onclick="Views.runCuration('origin', '新北', '新北')" class="${btnClass}"><span>新北</span><span>竹筍/地瓜</span></button></div></div>
                            <div><h5 class="text-amber-500 font-bold mb-3 border-l-2 border-amber-500 pl-2">中部</h5><div class="flex flex-col gap-2"><button onclick="Views.runCuration('origin', '苗栗', '苗栗')" class="${btnClass}"><span>苗栗</span><span>紅棗/杭菊</span></button><button onclick="Views.runCuration('origin', '台中', '台中')" class="${btnClass}"><span>台中</span><span>菇類/芋頭</span></button><button onclick="Views.runCuration('origin', '彰化', '彰化')" class="${btnClass}"><span>彰化</span><span>葡萄/花卉</span></button><button onclick="Views.runCuration('origin', '南投', '南投')" class="${btnClass}"><span>南投</span><span>百香果/茶</span></button><button onclick="Views.runCuration('origin', '雲林', '雲林')" class="${btnClass}"><span>雲林</span><span>蒜/蔬菜</span></button></div></div>
                            <div><h5 class="text-red-500 font-bold mb-3 border-l-2 border-red-500 pl-2">南部</h5><div class="flex flex-col gap-2"><button onclick="Views.runCuration('origin', '嘉義', '嘉義')" class="${btnClass}"><span>嘉義</span><span>秋葵/木耳</span></button><button onclick="Views.runCuration('origin', '台南', '台南')" class="${btnClass}"><span>台南</span><span>芒果/蓮花</span></button><button onclick="Views.runCuration('origin', '高雄', '高雄')" class="${btnClass}"><span>高雄</span><span>莧菜/茄子</span></button><button onclick="Views.runCuration('origin', '屏東', '屏東')" class="${btnClass}"><span>屏東</span><span>蓮霧/洋蔥</span></button></div></div>
                            <div><h5 class="text-blue-500 font-bold mb-3 border-l-2 border-blue-500 pl-2">東部</h5><div class="flex flex-col gap-2"><button onclick="Views.runCuration('origin', '花蓮', '花蓮')" class="${btnClass}"><span>花蓮</span><span>西瓜/金針</span></button><button onclick="Views.runCuration('origin', '台東', '台東')" class="${btnClass}"><span>台東</span><span>釋迦/洛神</span></button></div></div>
                            <div><h5 class="text-purple-500 font-bold mb-3 border-l-2 border-purple-500 pl-2">離島</h5><div class="flex flex-col gap-2"><button onclick="Views.runCuration('origin', '金門', '金門')" class="${btnClass}"><span>金門</span><span>芋頭</span></button><button onclick="Views.runCuration('origin', '澎湖', '澎湖')" class="${btnClass}"><span>澎湖</span><span>絲瓜</span></button><button onclick="Views.runCuration('origin', '馬祖', '馬祖')" class="${btnClass}"><span>馬祖</span><span>白蘿蔔</span></button></div></div>
                        </div>`;
                } else if(type === 'health') {
                    const pillClass = "border border-slate-600 bg-slate-800 text-slate-300 hover:border-emerald-500 hover:text-emerald-400 px-4 py-2 rounded-full text-sm transition duration-300 mb-2";
                    html = `<h4 class="font-bold text-emerald-400 mb-6 text-lg"><i class="fas fa-user-md mr-3"></i>請選擇對症需求：</h4><div class="flex flex-wrap gap-4"><button onclick="Views.runCuration('health', 'low_gi', '糖尿病')" class="${pillClass}">糖尿病 (低GI)</button><button onclick="Views.runCuration('health', 'high_potassium', '高血壓')" class="${pillClass}">高血壓 (高鉀)</button><button onclick="Views.runCuration('health', 'ulcer_friendly', '護胃')" class="${pillClass}">護胃 (修復)</button><button onclick="Views.runCuration('health', 'low_purine', '痛風')" class="${pillClass}">痛風 (低普林/鹼性)</button></div>`;
                } else if(type === 'nutrition') {
                     const pillClass = "border border-slate-600 bg-slate-800 text-slate-300 hover:border-blue-500 hover:text-blue-400 px-4 py-2 rounded-full text-sm transition duration-300 mb-2";
                    html = `<h4 class="font-bold text-blue-400 mb-6 text-lg"><i class="fas fa-vial mr-3"></i>請選擇機能需求：</h4><div class="flex flex-wrap gap-4"><button onclick="Views.runCuration('nutrition', 'high_iron', '氣色補鐵')" class="${pillClass}">氣色補鐵</button><button onclick="Views.runCuration('nutrition', 'eye_care', '護眼明目')" class="${pillClass}">護眼明目</button><button onclick="Views.runCuration('nutrition', 'calming', '安神助眠')" class="${pillClass}">安神助眠</button><button onclick="Views.runCuration('nutrition', 'high_vit_c', '美白抗氧')" class="${pillClass}">美白抗氧</button></div>`;
                } else if(type === 'type') {
                     const pillClass = "border border-slate-600 bg-slate-800 text-slate-300 hover:border-pink-500 hover:text-pink-400 px-4 py-2 rounded-full text-sm transition duration-300 mb-2";
                    html = `<h4 class="font-bold text-pink-400 mb-6 text-lg"><i class="fas fa-filter mr-3"></i>請選擇食材類別：</h4><div class="flex flex-wrap gap-4"><button onclick="Views.runCuration('type', '花', '花卉養生')" class="${pillClass}">花卉養生</button><button onclick="Views.runCuration('type', '藥膳', '藥膳食補')" class="${pillClass}">藥膳食補</button><button onclick="Views.runCuration('type', '菌菇', '菌菇多醣體')" class="${pillClass}">菌菇多醣體</button></div>`;
                }
                panel.innerHTML = html;
            },

            runCuration: async (type, key, label) => {
                const all = await db.ingredients.toArray();
                let results = [];
                let note = "";
                let reason = "";

                if(type === 'health') {
                    if(key === 'low_gi') { results = all.filter(i => i.tags.includes('low_gi') || i.tags.includes('high_fiber')); note = "針對血糖控制，我們嚴選低升糖指數食材，幫助穩定餐後血糖。"; reason = "控糖"; }
                    else if(key === 'high_potassium') { results = all.filter(i => i.tags.includes('high_potassium') || i.tags.includes('diuretic')); note = "針對高血壓，推薦高鉀食材以助排鈉，維持血管健康。"; reason = "降壓"; }
                    else if(key === 'low_purine') { results = all.filter(i => i.tags.includes('alkaline') || i.tags.includes('diuretic') || i.tags.includes('low_purine') || (i.type === '水果' && !i.tags.includes('high_sugar'))); note = "針對痛風調理，關鍵在於「鹼性食物」與「利尿代謝」。我們精選了幫助尿酸排泄的食材，並避開高風險項目。"; reason = "低普林"; }
                    else if(key === 'ulcer_friendly') { results = all.filter(i => i.tags.includes('ulcer_friendly') || i.tags.includes('mucilage')); note = "針對護胃需求，精選富含「維生素U」與「天然黏液蛋白」的食材，能修復胃黏膜，減少刺激。"; reason = "護胃"; }
                    else if(key === 'high_iron') { results = all.filter(i => i.tags.includes('high_iron') || i.tags.includes('blood_tonic')); note = "針對氣血不足，精選富含鐵質與維生素C的食材，提升吸收率。"; reason = "補血"; }
                    else { results = all.filter(i => i.tags.includes(key)); note = `針對${label}需求，我們篩選了具備相關營養機能的食材。`; reason = label; }
                } else if (type === 'nutrition') {
                     results = await SmartEngine.filterByNutrition(key);
                     note = `針對${label}需求，我們篩選了具備相關營養機能的食材。`; reason = label;
                } else if (type === 'origin') {
                    results = all.filter(i => i.origin && i.origin.includes(key));
                    note = `探索【${label}】。這裡獨特的氣候與水土，孕育了這些無可取代的在地食材。`; 
                    reason = key;
                } else if (type === 'type') {
                    results = all.filter(i => i.type === key);
                    note = `精選${label}系列。發掘這類食材獨有的養生價值與料理應用。`; reason = key;
                }

                document.getElementById('curation-results').classList.remove('hidden');
                document.getElementById('note-content').innerText = note;
                document.getElementById('ai-curation-result').classList.add('hidden');
                const grid = document.getElementById('discovery-grid');
                if(!results || results.length === 0) { grid.innerHTML = '<div class="col-span-full text-center text-slate-500 py-10">尚無符合條件的食材，請嘗試其他分類。</div>'; return; }
                grid.innerHTML = results.map(ing => `<div onclick="app.navigate('ingredients/${ing.id}')" class="gold-card bg-slate-900 p-4 rounded-xl cursor-pointer"><div class="font-bold text-slate-100 text-base mb-1">${ing.name_zh}</div><div class="text-[10px] text-amber-500 mb-2">${ing.type} · ${ing.origin||'台灣'}</div><div class="reason-tag">${reason}</div></div>`).join('');
                window.curationContext = { label, items: results.map(i => i.name_zh), note, reason };
                document.getElementById('curation-results').scrollIntoView({behavior: 'smooth'});
            },

            triggerCuratorAI: async () => {
                const ctx = window.curationContext;
                const prompt = `角色：智慧策展大師。情境：使用者選擇「${ctx.label}」。理由：${ctx.note}。食材：${ctx.items.join('、')}。
                任務：請撰寫一份完整的「${ctx.label}」飲食策展方案。
                結構：1.【策展理念】為什麼適合？ 2.【核心食材解析】挑選3-5種重點介紹。 3.【大師食譜】設計一道料理。 4.【生活建議】。
                格式：Markdown。`;
                const box = document.getElementById('ai-curation-result');
                const text = document.getElementById('ai-curation-text');
                box.classList.remove('hidden');
                text.innerHTML = '<div class="text-center py-10 text-slate-400">大師正在為您策展...</div>';
                const res = await app.callAI(prompt);
                text.innerHTML = marked.parse(res.text);
            },

            solarList: async () => { const terms = await db.solarTerms.toArray(); const seasons = { "春生 (Spring)": terms.slice(0,6), "夏長 (Summer)": terms.slice(6,12), "秋收 (Autumn)": terms.slice(12,18), "冬藏 (Winter)": terms.slice(18,24) }; let html = `<div class="max-w-6xl mx-auto pb-10 fade-in"><div class="flex justify-between items-center mb-10 pb-4 border-b border-slate-800"><div><h2 class="text-3xl font-serif font-bold text-amber-400">二十四節氣智慧</h2></div><button onclick="app.navigate('home')" class="text-slate-400 hover:text-white"><i class="fas fa-home"></i></button></div>`; let idx = 0; const colors = ["text-emerald-400", "text-red-400", "text-amber-400", "text-blue-400"]; for(let s in seasons) { html += `<h3 class="text-xl font-bold ${colors[idx]} mt-12 mb-6 pl-4 border-l-4 border-current">${s}</h3><div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">` + seasons[s].map(t => `<div onclick="app.navigate('solar-terms/${t.id}')" class="gold-card bg-slate-900 p-4 rounded-xl cursor-pointer group"><div class="text-[10px] text-slate-500 mb-1 font-mono">${t.dateHint}</div><h4 class="text-lg font-serif font-bold text-slate-200 mb-2 group-hover:text-amber-400 transition">${t.name_zh}</h4><p class="text-[10px] text-slate-400 line-clamp-1">${t.livingAdvice[0]}</p></div>`).join('') + `</div>`; idx++; } return html + `</div>`; },
            solarDetail: async (id) => { const term = await db.solarTerms.get(id) || await db.solarTerms.get(Number(id)); if(!term) return 'Error'; return `<div class="max-w-4xl mx-auto pb-20 fade-in"><button onclick="app.navigate('solar-terms')" class="text-xs text-slate-400 mb-6 hover:text-white flex items-center gap-2 font-bold tracking-widest uppercase"><i class="fas fa-arrow-left"></i> 返回列表</button><div class="bg-slate-900 rounded-3xl p-12 shadow-2xl relative overflow-hidden mb-12 border border-slate-800"><div class="relative z-10 text-center"><h1 class="text-6xl font-serif font-bold mb-4 text-white">${term.name_zh}</h1><p class="font-mono text-amber-500 text-lg tracking-widest">${term.dateHint}</p></div></div><div class="grid md:grid-cols-3 gap-8 mb-12"><div class="bg-slate-900 p-8 rounded-2xl border border-slate-800 text-center"><h3 class="font-bold text-slate-200 mb-2 text-lg">氣候</h3><p class="text-sm text-slate-400">${term.climateKeywords.join(' ')}</p></div><div class="bg-slate-900 p-8 rounded-2xl border border-slate-800 text-center"><h3 class="font-bold text-slate-200 mb-2 text-lg">養生</h3><p class="text-sm text-slate-400">${term.livingAdvice.join(' ')}</p></div><div class="bg-slate-900 p-8 rounded-2xl border border-slate-800 text-center"><h3 class="font-bold text-slate-200 mb-2 text-lg">飲食</h3><p class="text-sm text-slate-400">${term.foodViewpoint}</p></div></div><div class="text-center mb-8"><button onclick="Views.triggerSolarAI('${term.name_zh}')" class="bg-amber-600 hover:bg-amber-500 text-white px-10 py-4 rounded-full font-bold shadow-lg transition text-lg">啟動節氣大師解析</button></div><div id="solar-ai-res" class="hidden bg-slate-900 p-10 rounded-3xl shadow-2xl border border-slate-800"><div class="flex justify-between items-center mb-6 border-b border-slate-800 pb-4"><h3 class="font-bold text-xl text-amber-400 font-serif">大師解析</h3><button onclick="app.exportWord('${term.name_zh}節氣', document.getElementById('solar-ai-text').innerText)" class="text-xs bg-slate-200 hover:bg-white text-slate-900 px-4 py-2 rounded font-bold">下載 Word</button></div><div id="solar-ai-text" class="markdown-body"></div></div></div>`; },
            triggerSolarAI: async (name) => { document.getElementById('solar-ai-res').classList.remove('hidden'); document.getElementById('solar-ai-text').innerHTML = "大師解析中..."; const res = await app.callAI(`我是節氣大師，請解析「${name}」的天地氣候、人體對應與飲食智慧。請使用條列式重點與Emoji讓文章更生動。注意：請勿使用表格。`); document.getElementById('solar-ai-text').innerHTML = marked.parse(res.text); },
            ingredientList: async () => { const all = await db.ingredients.toArray(); const cats = {}; all.forEach(i => { if(!cats[i.type]) cats[i.type]=[]; cats[i.type].push(i); }); const order = ['花','藥膳','香料','菌菇','五穀','水果','葉菜','根莖','瓜果','豆類']; const sortedKeys = Object.keys(cats).sort((a,b) => order.indexOf(a) - order.indexOf(b)); let html = `<div class="max-w-6xl mx-auto pb-10 fade-in"><div class="flex justify-between items-center mb-10 pb-4 border-b border-slate-800"><div><h2 class="text-3xl font-serif font-bold text-amber-400">食材百科全書 (${all.length})</h2></div><button onclick="app.navigate('home')" class="text-slate-400 hover:text-white"><i class="fas fa-home"></i></button></div>`; for(let c of sortedKeys) { html += `<h3 class="text-xl font-bold mt-12 mb-6 flex items-center text-slate-200"><span class="bg-amber-500 text-slate-900 px-2 py-1 rounded text-sm mr-3 font-bold">${cats[c].length}</span> ${c}類</h3><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">` + cats[c].map(ing => `<div onclick="app.navigate('ingredients/${ing.id}')" class="gold-card bg-slate-900 p-4 rounded-xl cursor-pointer group"><div class="flex justify-between items-start mb-2"><div class="font-bold text-slate-200 text-lg group-hover:text-amber-400 transition">${ing.name_zh}</div><div class="text-[10px] text-slate-500 border border-slate-700 px-1.5 py-0.5 rounded">${ing.origin || '台灣'}</div></div><p class="text-xs text-slate-400 line-clamp-2 leading-relaxed mb-3">${ing.brief}</p><div class="flex gap-1 flex-wrap">${ing.tags.slice(0,2).map(t=>`<span class="text-[9px] text-emerald-400 bg-emerald-900/30 px-1.5 py-0.5 rounded-full border border-emerald-900">#${t}</span>`).join('')}</div></div>`).join(''); html += `</div>`; } return html + `</div>`; },
            ingredientDetail: async (id) => { const ing = await db.ingredients.get(Number(id)); if(!ing) return 'Error'; return `<div class="max-w-3xl mx-auto pb-20 fade-in"><button onclick="app.navigate('ingredients')" class="text-xs text-slate-400 mb-6 hover:text-white flex items-center gap-2 font-bold tracking-widest uppercase transition"><i class="fas fa-arrow-left"></i> 返回列表</button><div class="bg-slate-900 p-10 rounded-3xl border border-slate-800 relative overflow-hidden mb-10 shadow-2xl"><div class="relative z-10"><div class="flex items-center gap-3 mb-4"><span class="bg-amber-500 text-slate-900 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">${ing.type}</span><span class="text-xs text-slate-400"><i class="fas fa-map-marker-alt mr-1"></i>${ing.origin}</span></div><h1 class="text-5xl font-serif font-bold text-white mb-6">${ing.name_zh}</h1><div class="p-5 bg-slate-800/50 rounded-xl border-l-4 border-amber-500 mb-6"><p class="text-base text-slate-300 font-serif leading-relaxed italic">"${ing.brief}"</p></div><div class="flex flex-wrap gap-2">${ing.tags.map(t => `<span class="px-3 py-1 bg-slate-800 text-slate-400 rounded-full text-xs border border-slate-700">#${t}</span>`).join('')}</div></div></div><div class="border-t border-slate-800 pt-10"><div class="flex justify-between items-center mb-8"><h3 class="text-2xl font-serif font-bold text-slate-200 flex items-center"><i class="fas fa-robot text-amber-500 mr-3"></i>AI 大師百科解析</h3><button onclick="Views.triggerIngAI('${ing.name_zh}', ${ing.id})" class="bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-full text-xs font-bold shadow-lg transition flex items-center gap-2"><i class="fas fa-search"></i> 啟動深度解析</button></div><div id="ai-result-box" class="hidden bg-slate-900 p-8 rounded-2xl shadow-xl border border-slate-800 min-h-[200px]"><div id="ai-result-content" class="markdown-body"></div><div class="mt-8 pt-4 border-t border-slate-800 flex justify-end"><button onclick="app.exportWord('${ing.name_zh}百科', document.getElementById('ai-result-content').innerText)" class="text-xs font-bold text-slate-900 bg-slate-200 hover:bg-white px-4 py-2 rounded transition"><i class="fas fa-download mr-1"></i> 下載 Word</button></div></div></div></div>`; },
            triggerIngAI: async (name, id) => { 
                const box = document.getElementById('ai-result-box'); 
                const content = document.getElementById('ai-result-content'); 
                box.classList.remove('hidden'); 
                content.innerHTML = '<div class="text-center text-slate-500 py-10">查詢大師資料庫中...</div>'; 
                const prompt = `[角色任務]：資深食材研究員。任務：為「${name}」撰寫百科條目。\n結構：1.身世性味 2.科學營養 3.選購保存 4.料理科學 5.大師提醒。\n語氣：專業詳實。格式：Markdown。注意：請勿使用表格，改以條列式文字呈現。`; 
                const res = await app.callAI(prompt); 
                content.innerHTML = marked.parse(res.text); 
                if(res.isAI) { app.saveAsset('encyclopedia', res.text, id); }
            }
        };

        const RawData = {
            solarTerms: [
                { id: "st_01", name_zh: "立春", dateHint: "2/3-5", climateKeywords: ["東風解凍","蟄蟲始振"], livingAdvice: ["晚睡早起","梳頭養陽"], foodViewpoint: "升發陽氣，宜辛甘發散，忌酸收。" },
                { id: "st_02", name_zh: "雨水", dateHint: "2/18-20", climateKeywords: ["鴻雁來","草木萌動"], livingAdvice: ["下厚上薄","祛濕防寒"], foodViewpoint: "調養脾胃，少酸多甘，祛濕。" },
                { id: "st_03", name_zh: "驚蟄", dateHint: "3/5-7", climateKeywords: ["桃始華","倉庚鳴"], livingAdvice: ["舒展筋骨","預防春瘟"], foodViewpoint: "清淡微溫，順應肝氣生發。" },
                { id: "st_04", name_zh: "春分", dateHint: "3/20-22", climateKeywords: ["玄鳥至","雷乃發聲"], livingAdvice: ["保持平衡","早起防敏"], foodViewpoint: "寒熱均衡，省酸增甘養脾。" },
                { id: "st_05", name_zh: "清明", dateHint: "4/4-6", climateKeywords: ["桐始華","虹始見"], livingAdvice: ["踏青抒懷","降肝火"], foodViewpoint: "柔肝養肺，避發物，食時鮮。" },
                { id: "st_06", name_zh: "穀雨", dateHint: "4/19-21", climateKeywords: ["萍始生","鳴鳩拂羽"], livingAdvice: ["防濕邪","通風透氣"], foodViewpoint: "補血益氣，健脾祛濕。" },
                { id: "st_07", name_zh: "立夏", dateHint: "5/5-7", climateKeywords: ["螻郭鳴","王瓜生"], livingAdvice: ["養心安神","適當午睡"], foodViewpoint: "清淡飲食，清熱降火，養心。" },
                { id: "st_08", name_zh: "小滿", dateHint: "5/20-22", climateKeywords: ["苦菜秀","麥秋至"], livingAdvice: ["防熱病","健脾除濕"], foodViewpoint: "清爽清淡，健脾利水。" },
                { id: "st_09", name_zh: "芒種", dateHint: "6/5-7", climateKeywords: ["螳螂生","鵙始鳴"], livingAdvice: ["勤洗澡","防中暑濕氣"], foodViewpoint: "清補為主，多食瓜果。" },
                { id: "st_10", name_zh: "夏至", dateHint: "6/21-22", climateKeywords: ["鹿角解","蟬始鳴"], livingAdvice: ["避暑氣","靜心養陰"], foodViewpoint: "苦味養心，消暑解渴。" },
                { id: "st_11", name_zh: "小暑", dateHint: "7/6-8", climateKeywords: ["溫風至","蟋蟀居宇"], livingAdvice: ["少動多靜","顧護陽氣"], foodViewpoint: "解熱利濕，補充水分鹽分。" },
                { id: "st_12", name_zh: "大暑", dateHint: "7/22-24", climateKeywords: ["腐草為螢","土潤溽暑"], livingAdvice: ["防曬避暑","益氣補氣"], foodViewpoint: "益氣生津，清熱解毒。" },
                { id: "st_13", name_zh: "立秋", dateHint: "8/7-9", climateKeywords: ["涼風至","白露降"], livingAdvice: ["收斂神氣","防秋老虎"], foodViewpoint: "滋陰潤肺，少辛多酸。" },
                { id: "st_14", name_zh: "處暑", dateHint: "8/22-24", climateKeywords: ["鷹乃祭鳥","天地始肅"], livingAdvice: ["早睡早起","養肺潤燥"], foodViewpoint: "多食酸甘，潤肺生津。" },
                { id: "st_15", name_zh: "白露", dateHint: "9/7-9", climateKeywords: ["鴻雁來","玄鳥歸"], livingAdvice: ["保暖腹部","防秋凍"], foodViewpoint: "溫潤補身，養陰益氣。" },
                { id: "st_16", name_zh: "秋分", dateHint: "9/22-24", climateKeywords: ["雷始收聲","蟄蟲坯戶"], livingAdvice: ["養收防燥","登山舒展"], foodViewpoint: "潤燥護膚，平衡陰陽。" },
                { id: "st_17", name_zh: "寒露", dateHint: "10/8-9", climateKeywords: ["鴻雁來賓","菊有黃華"], livingAdvice: ["足浴保暖","防寒氣"], foodViewpoint: "養陰防燥，潤肺益胃。" },
                { id: "st_18", name_zh: "霜降", dateHint: "10/23-24", climateKeywords: ["豺乃祭獸","草木黃落"], livingAdvice: ["補冬前奏","養胃暖身"], foodViewpoint: "平補潤肺，健脾養胃。" },
                { id: "st_19", name_zh: "立冬", dateHint: "11/7-8", climateKeywords: ["水冰地凍","雉入大水"], livingAdvice: ["藏陽護陰","早睡晚起"], foodViewpoint: "溫補養腎，多食黑色食物。" },
                { id: "st_20", name_zh: "小雪", dateHint: "11/22-23", climateKeywords: ["虹藏不見","天氣上升"], livingAdvice: ["溫養陽氣","適度曬背"], foodViewpoint: "禦寒保暖，溫補氣血。" },
                { id: "st_21", name_zh: "大雪", dateHint: "12/6-8", climateKeywords: ["鶡鴠不鳴","虎始交"], livingAdvice: ["去寒就溫","護頭暖足"], foodViewpoint: "進補養生，驅寒保暖。" },
                { id: "st_22", name_zh: "冬至", dateHint: "12/21-23", climateKeywords: ["蚯蚓結","麋角解"], livingAdvice: ["避風寒","靜養潛陽"], foodViewpoint: "補陽氣，食湯圓餃子。" },
                { id: "st_23", name_zh: "小寒", dateHint: "1/5-7", climateKeywords: ["雁北鄉","鵲始巢"], livingAdvice: ["養腎防寒","適當運動"], foodViewpoint: "溫補避寒，滋養臟腑。" },
                { id: "st_24", name_zh: "大寒", dateHint: "1/20-21", climateKeywords: ["雞乳","征鳥厲疾"], livingAdvice: ["養精蓄銳","藏神納氣"], foodViewpoint: "固護脾腎，調養氣血。" }
            ],
            ingredients: [
                // 1. Flowers (20)
                { name_zh: "洛神花", type: "花", origin: "台東", tags: ["cool","sour"], brief: "植物紅寶石，降脂護肝，美容養顏。", solarTermIds: ["st_17","st_18"] },
                { name_zh: "杭菊", type: "花", origin: "苗栗銅鑼", tags: ["cool","eye_care"], brief: "清肝明目，疏散風熱，降火。", solarTermIds: ["st_19","st_20"] },
                { name_zh: "野薑花", type: "花", origin: "屏東", tags: ["warm","aromatic"], brief: "溫胃散寒，開胃，花香濃郁。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "桂花", type: "花", origin: "南投", tags: ["warm","lung_care"], brief: "化痰散瘀，暖胃，香氣迷人。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "金針花", type: "花", origin: "花蓮六十石山", tags: ["cool","calming"], brief: "忘憂草，補血安神，需煮熟。", solarTermIds: ["st_13","st_14"] },
                { name_zh: "茉莉花", type: "花", origin: "彰化花壇", tags: ["warm","calming"], brief: "理氣解鬱，安神，花茶首選。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "玫瑰花", type: "花", origin: "南投埔里", tags: ["warm","blood_circ"], brief: "美容茶，行氣活血，調經止痛。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "蓮花", type: "花", origin: "台南白河", tags: ["neutral","detox"], brief: "清暑解熱，止血，全身是寶。", solarTermIds: ["st_10","st_11"] },
                { name_zh: "曇花", type: "花", origin: "嘉義", tags: ["neutral","lung_friendly"], brief: "月下美人，清肺止咳，燉湯佳。", solarTermIds: ["st_10","st_11"] },
                { name_zh: "木棉花", type: "花", origin: "台南", tags: ["cool","detox"], brief: "英雄花，清熱利濕，解毒。", solarTermIds: ["st_04","st_05"] },
                { name_zh: "檳榔花", type: "花", origin: "屏東", tags: ["cool","thirst_quench"], brief: "半天花，清涼退火，口感脆。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "絲瓜花", type: "花", origin: "雲林", tags: ["cool","detox"], brief: "清熱解毒，可裹粉油炸。", solarTermIds: ["st_08","st_09"] },
                { name_zh: "南瓜花", type: "花", origin: "花蓮", tags: ["warm","tonic"], brief: "食用花后，消腫散瘀，強身。", solarTermIds: ["st_08","st_09"] },
                { name_zh: "夜來香", type: "花", origin: "雲林", tags: ["warm","eye_care"], brief: "清肝明目，去翳，燉湯。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "玉蘭花", type: "花", origin: "屏東", tags: ["warm","lung_friendly"], brief: "行氣化濕，止咳，香氣濃。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "山茶花", type: "花", origin: "陽明山", tags: ["cool","blood_stop"], brief: "涼血止血，散瘀消腫。", solarTermIds: ["st_23","st_24"] },
                { name_zh: "蝶豆花", type: "花", origin: "屏東", tags: ["neutral","antioxidant"], brief: "富含花青素，天然色素，抗氧化。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "霸王花", type: "花", origin: "南部", tags: ["cool","lung_care"], brief: "劍花，清熱潤肺，止咳化痰。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "油菜花", type: "花", origin: "花東縱谷", tags: ["cool","vitamin"], brief: "鈣鐵豐富，春季美景與美食。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "韭菜花", type: "花", origin: "桃園大溪", tags: ["warm","fiber"], brief: "口感脆嫩，溫補肝腎。", solarTermIds: ["st_13","st_14"] },

                // 2. Herbs/Medicinal (20)
                { name_zh: "紅棗", type: "藥膳", origin: "苗栗公館", tags: ["warm","blood_tonic"], brief: "天然維生素丸，補中益氣，養血安神。", solarTermIds: ["st_13","st_14"] },
                { name_zh: "枸杞", type: "藥膳", origin: "進口/苗栗", tags: ["neutral","eye_care"], brief: "明眼子，滋補肝腎，抗衰老。", solarTermIds: ["st_13","st_14"] },
                { name_zh: "當歸", type: "藥膳", origin: "花蓮", tags: ["warm","blood_circ"], brief: "補血聖藥，調經止痛，潤腸通便。", solarTermIds: ["st_19","st_20"] },
                { name_zh: "黃耆", type: "藥膳", origin: "進口", tags: ["warm","qi_tonic"], brief: "補氣之王，增強免疫力，固表止汗。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "山藥", type: "藥膳", origin: "新北基隆", tags: ["neutral","tonic","ulcer_friendly","mucilage"], brief: "神仙之食，益氣養陰，補脾肺腎。", solarTermIds: ["st_17","st_18"] },
                { name_zh: "蓮子", type: "藥膳", origin: "台南白河", tags: ["neutral","calming"], brief: "清心醒脾，補脾止瀉，養心安神。", solarTermIds: ["st_10","st_11"] },
                { name_zh: "百合", type: "藥膳", origin: "花蓮", tags: ["cool","lung_care"], brief: "潤肺止咳，清心安神，美容養顏。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "芡實", type: "藥膳", origin: "進口", tags: ["neutral","kidney"], brief: "水中人參，益腎固精，健脾止瀉。", solarTermIds: ["st_13","st_14"] },
                { name_zh: "薏仁", type: "藥膳", origin: "南投草屯", tags: ["cool","diuretic"], brief: "健脾滲濕，除痹止瀉，清熱排膿。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "陳皮", type: "藥膳", origin: "新竹", tags: ["warm","digest"], brief: "理氣健脾，燥濕化痰。", solarTermIds: ["st_19","st_20"] },
                { name_zh: "川芎", type: "藥膳", origin: "進口", tags: ["warm","blood_circ"], brief: "血中氣藥，活血行氣，祛風止痛。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "甘草", type: "藥膳", origin: "進口", tags: ["neutral","detox"], brief: "國老，調和諸藥，補脾益氣。", solarTermIds: ["st_01","st_24"] },
                { name_zh: "茯苓", type: "藥膳", origin: "進口", tags: ["neutral","calming"], brief: "四時神藥，利水滲濕，健脾寧心。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "白木耳", type: "藥膳", origin: "阿里山", tags: ["neutral","collagen"], brief: "平民燕窩，滋陰潤肺，養胃生津。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "黑木耳", type: "藥膳", origin: "嘉義中埔", tags: ["neutral","blood_clean"], brief: "血管清道夫，補血活血，潤腸通便。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "靈芝", type: "藥膳", origin: "南投", tags: ["neutral","immunity"], brief: "仙草，補氣安神，止咳平喘。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "人參", type: "藥膳", origin: "進口", tags: ["warm","qi_tonic"], brief: "百草之王，大補元氣，復脈固脫。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "決明子", type: "藥膳", origin: "進口", tags: ["cool","eye_care"], brief: "清熱明目，潤腸通便。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "何首烏", type: "藥膳", origin: "進口", tags: ["warm","hair"], brief: "補肝腎，益精血，烏鬚髮。", solarTermIds: ["st_19","st_20"] },
                { name_zh: "艾草", type: "藥膳", origin: "全台", tags: ["warm","warm_womb"], brief: "溫經止血，散寒止痛。", solarTermIds: ["st_05","st_06"] },

                // 3. Leafy Veg (15)
                { name_zh: "高麗菜", type: "葉菜", origin: "台中梨山", tags: ["neutral","ulcer_friendly","low_gi"], brief: "天然胃藥，維生素U修復黏膜。", solarTermIds: ["st_20","st_21"] },
                { name_zh: "菠菜", type: "葉菜", origin: "雲林二崙", tags: ["cool","high_iron","high_oxalate"], brief: "大力水手菜，補鐵護眼。", solarTermIds: ["st_23","st_24"] },
                { name_zh: "地瓜葉", type: "葉菜", origin: "彰化/全台", tags: ["neutral","high_fiber"], brief: "排毒王，抗氧化力強。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "空心菜", type: "葉菜", origin: "桃園/雲林", tags: ["cool","high_potassium"], brief: "降壓首選，清熱解毒。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "芥菜", type: "葉菜", origin: "雲林大埤", tags: ["warm","high_fiber"], brief: "長年菜，提神醒腦。", solarTermIds: ["st_23","st_24"] },
                { name_zh: "茼蒿", type: "葉菜", origin: "雲林二崙", tags: ["neutral","high_sodium"], brief: "火鍋伴侶，養心安神。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "紅鳳菜", type: "葉菜", origin: "全台", tags: ["neutral","high_iron"], brief: "補血菜，含豐富花青素。", solarTermIds: ["st_03","st_04"] },
                { name_zh: "莧菜", type: "葉菜", origin: "高雄梓官", tags: ["cool","high_iron"], brief: "長壽菜，補鈣補鐵。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "芹菜", type: "葉菜", origin: "雲林西螺", tags: ["cool","low_bp","low_purine","diuretic"], brief: "廚房藥物，降血壓，利尿排酸。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "韭菜", type: "葉菜", origin: "桃園大溪", tags: ["warm","high_fiber"], brief: "起陽草，溫補肝腎。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "龍鬚菜", type: "葉菜", origin: "花蓮吉安", tags: ["cool","zero_cal"], brief: "零熱量，清熱消腫。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "過貓", type: "葉菜", origin: "花蓮", tags: ["cool","high_fiber"], brief: "富含錳，有助睡眠。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "山蘇", type: "葉菜", origin: "花蓮", tags: ["cool","high_fiber"], brief: "高纖補鉀，樹上翡翠。", solarTermIds: ["st_03","st_04"] },
                { name_zh: "川七", type: "葉菜", origin: "全台", tags: ["warm","blood_circ"], brief: "化瘀止血，顧胃。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "皇宮菜", type: "葉菜", origin: "雲林", tags: ["cool","mucilage"], brief: "落葵，黏液保護胃壁。", solarTermIds: ["st_08","st_09"] },
                { name_zh: "小白菜", type: "葉菜", origin: "全台", tags: ["cool","high_calcium"], brief: "鈣含量高，生長快。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "青江菜", type: "葉菜", origin: "桃園", tags: ["cool","high_calcium"], brief: "湯匙菜，清熱除煩。", solarTermIds: ["st_19","st_20"] },
                { name_zh: "芫荽", type: "葉菜", origin: "彰化北斗", tags: ["warm","metal_detox"], brief: "香菜，排重金屬。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "九層塔", type: "葉菜", origin: "屏東", tags: ["warm","aromatic"], brief: "行氣活血，解濕氣。", solarTermIds: ["st_08","st_09"] },
                { name_zh: "油菜", type: "葉菜", origin: "花東", tags: ["cool","high_calcium"], brief: "鈣鐵豐富，花可食。", solarTermIds: ["st_01","st_02"] },

                // 4. Root (15)
                { name_zh: "白蘿蔔", type: "根莖", origin: "馬祖/美濃", tags: ["cool","low_gi","diuretic"], brief: "地下小人參，生食清熱。", solarTermIds: ["st_23","st_24"] },
                { name_zh: "紅蘿蔔", type: "根莖", origin: "台南將軍/彰化", tags: ["neutral","eye_care"], brief: "護眼聖品，脂溶性維生素。", solarTermIds: ["st_20","st_21"] },
                { name_zh: "地瓜", type: "根莖", origin: "新北金山/南投竹山", tags: ["neutral","high_fiber"], brief: "優質澱粉，通便排毒。", solarTermIds: ["st_17","st_18"] },
                { name_zh: "馬鈴薯", type: "根莖", origin: "雲林斗南", tags: ["neutral","high_potassium"], brief: "高鉀降壓，地下蘋果。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "芋頭", type: "根莖", origin: "金門/台中大甲", tags: ["neutral","high_fiber"], brief: "調節血壓，開胃生津。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "蓮藕", type: "根莖", origin: "台南白河", tags: ["cool","high_starch"], brief: "涼血止血，秋季滋補。", solarTermIds: ["st_13","st_14"] },
                { name_zh: "竹筍", type: "根莖", origin: "新北五股/嘉義", tags: ["cool","high_fiber"], brief: "刮油高手，清熱化痰。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "牛蒡", type: "根莖", origin: "屏東歸來", tags: ["cool","detox"], brief: "東洋人參，清血排毒。", solarTermIds: ["st_03","st_04"] },
                { name_zh: "洋蔥", type: "根莖", origin: "屏東恆春", tags: ["warm","quercetin"], brief: "降脂抗敏，菜中皇后。", solarTermIds: ["st_03","st_04"] },
                { name_zh: "薑", type: "根莖", origin: "南投名間/台東", tags: ["warm","warm_stomach"], brief: "溫中止嘔，促進循環。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "菱角", type: "根莖", origin: "台南官田", tags: ["cool","tonic"], brief: "水中花生，健脾益氣。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "荸薺", type: "根莖", origin: "台南", tags: ["cold","antibacterial"], brief: "地下雪梨，清熱化痰。", solarTermIds: ["st_23","st_24"] },
                { name_zh: "大蒜", type: "根莖", origin: "雲林莿桐", tags: ["warm","antibiotic"], brief: "天然抗生素，殺菌防癌。", solarTermIds: ["st_04","st_05"] },
                { name_zh: "山藥", type: "根莖", origin: "基隆/新北", tags: ["neutral","tonic"], brief: "神仙之食，補腎健脾。", solarTermIds: ["st_17","st_18"] },
                { name_zh: "蘆筍", type: "根莖", origin: "彰化", tags: ["cool","folic_acid"], brief: "抗癌之王，護心血管。", solarTermIds: ["st_03","st_04"] },

                // 5. Fruits (25)
                { name_zh: "西瓜", type: "水果", origin: "花蓮", tags: ["cold","high_sugar"], brief: "天然白虎湯，消暑解渴。", solarTermIds: ["st_10","st_11"] },
                { name_zh: "芒果", type: "水果", origin: "台南玉井", tags: ["warm","high_sugar"], brief: "熱帶果王，益胃止嘔。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "鳳梨", type: "水果", origin: "台南關廟", tags: ["neutral","enzyme"], brief: "酵素助消化，抗發炎。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "芭樂", type: "水果", origin: "高雄燕巢", tags: ["neutral","high_vit_c","low_gi"], brief: "維C之王，高纖低糖。", solarTermIds: ["st_14","st_15"] },
                { name_zh: "香蕉", type: "水果", origin: "高雄旗山", tags: ["cold","potassium"], brief: "快樂水果，助眠防抽筋。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "蓮霧", type: "水果", origin: "屏東林邊", tags: ["cool","low_gi"], brief: "補水鎮靜，安神。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "木瓜", type: "水果", origin: "台南大內", tags: ["neutral","enzyme","ulcer_friendly"], brief: "萬壽果，分解蛋白，酵素助消化。", solarTermIds: ["st_13","st_14"] },
                { name_zh: "火龍果", type: "水果", origin: "彰化二林", tags: ["cool","high_fiber"], brief: "腸道清道夫，抗氧化。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "葡萄", type: "水果", origin: "彰化巨峰", tags: ["neutral","high_iron"], brief: "補氣血，強筋骨。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "草莓", type: "水果", origin: "苗栗大湖", tags: ["cool","high_vit_c"], brief: "美白保濕，葉酸豐富。", solarTermIds: ["st_23","st_01"] },
                { name_zh: "櫻桃", type: "水果", origin: "進口/高山", tags: ["warm","low_purine","gout_friendly","high_iron"], brief: "痛風剋星，花青素抗發炎，補鐵。", solarTermIds: ["st_09"] },
                { name_zh: "文旦", type: "水果", origin: "台南麻豆", tags: ["cool","high_fiber"], brief: "健胃消食，化痰。", solarTermIds: ["st_14","st_15"] },
                { name_zh: "釋迦", type: "水果", origin: "台東", tags: ["warm","high_sugar"], brief: "佛頭果，高鉀調節血壓。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "橘子", type: "水果", origin: "台中東勢", tags: ["warm","high_vit_c"], brief: "潤肺理氣，化痰。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "柳丁", type: "水果", origin: "雲林古坑", tags: ["neutral","immunity"], brief: "增強免疫，解油膩。", solarTermIds: ["st_20","st_21"] },
                { name_zh: "百香果", type: "水果", origin: "南投埔里", tags: ["warm","calming"], brief: "果汁之王，安神。", solarTermIds: ["st_12","st_13"] },
                { name_zh: "荔枝", type: "水果", origin: "高雄大樹", tags: ["warm","tonic"], brief: "補腦健身，不可多食。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "柿子", type: "水果", origin: "新竹新埔", tags: ["cold","lung_care"], brief: "潤肺止咳，解酒。", solarTermIds: ["st_16","st_17"] },
                { name_zh: "檸檬", type: "水果", origin: "屏東九如", tags: ["cool","alkaline"], brief: "平衡酸鹼，美白。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "酪梨", type: "水果", origin: "台南大內", tags: ["neutral","good_fat"], brief: "森林奶油，護心。", solarTermIds: ["st_12","st_13"] },
                { name_zh: "金桔", type: "水果", origin: "宜蘭", tags: ["warm","throat"], brief: "止咳化痰，解鬱。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "桑椹", type: "水果", origin: "全台", tags: ["cool","tonic"], brief: "補肝益腎，黑髮。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "枇杷", type: "水果", origin: "台中太平", tags: ["cool","lung_care"], brief: "潤肺止咳，清熱。", solarTermIds: ["st_04","st_05"] },
                { name_zh: "楊桃", type: "水果", origin: "苗栗卓蘭", tags: ["cold","kidney_caution"], brief: "生津解渴，腎病禁食。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "水梨", type: "水果", origin: "台中梨山", tags: ["cold","high_water"], brief: "百果之宗，清熱潤肺。", solarTermIds: ["st_15","st_16"] },
                { name_zh: "龍眼", type: "水果", origin: "中南部", tags: ["warm","tonic"], brief: "益智果，補心脾。", solarTermIds: ["st_13","st_14"] },

                // 6. Fruit Veg (11)
                { name_zh: "秋葵", type: "瓜果", origin: "嘉義", tags: ["cool","ulcer_friendly","mucilage","low_gi"], brief: "綠色人參，黏液護胃降糖。", solarTermIds: ["st_07","st_08"] },
                { name_zh: "小黃瓜", type: "瓜果", origin: "屏東", tags: ["cool","low_purine","diuretic","weight_loss"], brief: "補水神器，清熱利尿，脂肪剋星。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "冬瓜", type: "瓜果", origin: "彰化", tags: ["cool","low_purine","diuretic"], brief: "利尿消腫，不含脂肪。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "苦瓜", type: "瓜果", origin: "屏東", tags: ["cold","low_gi"], brief: "降火氣，苦瓜苷降血糖。", solarTermIds: ["st_10","st_11"] },
                { name_zh: "絲瓜", type: "瓜果", origin: "澎湖/中南部", tags: ["cool","beauty"], brief: "美容水，清熱化痰。", solarTermIds: ["st_08","st_09"] },
                { name_zh: "南瓜", type: "瓜果", origin: "花蓮", tags: ["warm","high_zinc"], brief: "護攝護腺，補中益氣。", solarTermIds: ["st_18","st_19"] },
                { name_zh: "大黃瓜", type: "瓜果", origin: "全台", tags: ["cool","diuretic"], brief: "刺瓜，清熱利水。", solarTermIds: ["st_08","st_09"] },
                { name_zh: "茄子", type: "瓜果", origin: "高雄", tags: ["cool","antioxidant"], brief: "護血管，花青素豐富。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "番茄", type: "瓜果", origin: "台南", tags: ["cool","lycopene"], brief: "茄紅素抗癌，護心。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "青椒", type: "瓜果", origin: "南投", tags: ["warm","high_vit_c"], brief: "維C寶庫，特有氣味。", solarTermIds: ["st_03","st_04"] },
                { name_zh: "玉米", type: "瓜果", origin: "雲林", tags: ["neutral","lutein"], brief: "護眼黃金，健腦。", solarTermIds: ["st_08","st_09"] },

                // 7. Fungi (10)
                { name_zh: "香菇", type: "菌菇", origin: "台中新社", tags: ["neutral","immunity"], brief: "菇中之王，多醣體增強免疫。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "杏鮑菇", type: "菌菇", origin: "台中", tags: ["neutral","protein"], brief: "素食牛排，高蛋白Q彈。", solarTermIds: ["st_23","st_24"] },
                { name_zh: "金針菇", type: "菌菇", origin: "台中霧峰", tags: ["cool","brain_health"], brief: "益智菇，助腦發育。", solarTermIds: ["st_21","st_22"] },
                { name_zh: "木耳", type: "菌菇", origin: "嘉義中埔", tags: ["neutral","blood_clean"], brief: "血管清道夫，補鈣補鐵。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "秀珍菇", type: "菌菇", origin: "台中", tags: ["neutral","protein"], brief: "口感滑嫩，富含維生素B群。", solarTermIds: ["st_05","st_06"] },
                { name_zh: "珊瑚菇", type: "菌菇", origin: "台中", tags: ["neutral","immunity"], brief: "黃金菇，增強體力。", solarTermIds: ["st_09","st_10"] },
                { name_zh: "洋菇", type: "菌菇", origin: "彰化", tags: ["neutral","protein"], brief: "西洋蘑菇，口感細緻。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "草菇", type: "菌菇", origin: "台南", tags: ["cool","vit_c"], brief: "蘭花菇，消暑解熱。", solarTermIds: ["st_10","st_11"] },
                { name_zh: "舞菇", type: "菌菇", origin: "進口/在地", tags: ["neutral","immunity"], brief: "日本國寶菇，調節血糖。", solarTermIds: ["st_19","st_20"] },
                { name_zh: "猴頭菇", type: "菌菇", origin: "進口/在地", tags: ["neutral","stomach"], brief: "養胃山珍，口感似肉。", solarTermIds: ["st_17","st_18"] },

                // 8. Spice/Grains (5)
                { name_zh: "蔥", type: "香料", origin: "宜蘭三星", tags: ["warm","cold_relief"], brief: "通陽解毒，發汗解表。", solarTermIds: ["st_01","st_02"] },
                { name_zh: "蒜", type: "香料", origin: "雲林莿桐", tags: ["warm","antibiotic"], brief: "強力殺菌，降血脂防癌。", solarTermIds: ["st_04","st_05"] },
                { name_zh: "辣椒", type: "香料", origin: "花蓮", tags: ["hot","metabolism"], brief: "燃燒脂肪，除濕。", solarTermIds: ["st_11","st_12"] },
                { name_zh: "花生", type: "五穀", origin: "雲林", tags: ["neutral","resveratrol"], brief: "長生果，白藜蘆醇抗老。", solarTermIds: ["st_12","st_13"] },
                { name_zh: "芝麻", type: "五穀", origin: "台南", tags: ["neutral","calcium"], brief: "補鈣冠軍，潤腸通便。", solarTermIds: ["st_15","st_16"] }
            ]
        };
        
        // Boot
        app.init();
    </script>
</body>
</html>